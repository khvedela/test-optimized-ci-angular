<div class="project-list-container">
  <div class="header">
    <h1>Projects</h1>
    <button mat-raised-button color="primary" routerLink="/projects/new">
      <mat-icon>add</mat-icon>
      New Project
    </button>
  </div>

  @if (loading()) {
    <div class="loading">Loading projects...</div>
  }

  @if (error()) {
    <div class="error">{{ error() }}</div>
  }

  @if (!loading() && !error()) {
    <div class="projects-grid">
      @for (project of projects(); track project.id) {
        <mat-card class="project-card">
          <mat-card-header>
            <mat-card-title>{{ project.name }}</mat-card-title>
            <mat-card-subtitle>
              <mat-chip [class]="'status-' + project.status">{{ project.status }}</mat-chip>
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p>{{ project.description }}</p>
            <div class="project-meta">
              <span><mat-icon>people</mat-icon> {{ project.memberIds.length }} members</span>
              <span><mat-icon>schedule</mat-icon> {{ project.updatedAt | date }}</span>
            </div>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button [routerLink]="['/projects', project.id]">View</button>
            <button mat-button [routerLink]="['/projects', project.id, 'edit']">Edit</button>
            <button mat-button color="warn" (click)="onDeleteProject(project.id)">Delete</button>
          </mat-card-actions>
        </mat-card>
      } @empty {
        <div class="empty-state">
          <mat-icon>folder_open</mat-icon>
          <p>No projects yet</p>
          <button mat-raised-button color="primary" routerLink="/projects/new">
            Create your first project
          </button>
        </div>
      }
    </div>
  }
</div>
